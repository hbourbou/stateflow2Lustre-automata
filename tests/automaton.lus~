node controller (in1, in2:bool) returns (out: bool);
var resume0,x: int;
let

automaton a
state STATE1:
	let out = true; tel
	until out resume STATE2
	until in2  resume FAIL_SAFE
state STATE2:
	let
	out = false;
	x = 0 -> (pre x) + 1 ;
	tel
	until (out > 1000) resume FAIL_SAFE
state FAIL_SAFE:
	let 
	out =  false;	
	resume0 =5-> (pre resume0) - 1 ;
	
	tel
	until (resume0 <= 0) resume STATE2

tel

