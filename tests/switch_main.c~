#include <stdio.h>
#include <unistd.h>
#include "/usr/local/include/lustrec/io_frontend.h"
#include <stdlib.h>
#include <assert.h>
#include "switch_alloc.h"

/* C code generated by lustrec
   SVN version number 1.1-Unversioned directory
   Code is C99 compliant */
   
int main (int argc, char *argv[]) {
  /* Declaration of inputs/outputs variables */
  _Bool Set = 0;
  _Bool Reset = 0;
  _Bool OK = 0;
  
  /* Main memory allocation */
  top_ALLOC(static,main_mem);
  
  /* Initialize the main memory */
  top_reset(&main_mem);
  
  ISATTY = isatty(0);
  
  /* Infinite loop */
  while(1){
    fflush(stdout);
    Set = _get_bool("Set");
    Reset = _get_bool("Reset");
    top_step(Set, Reset, &OK, &main_mem);
    _put_bool("OK", OK);
  }
  return 1;
}
